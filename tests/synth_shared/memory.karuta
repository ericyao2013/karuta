// VERILOG_OUTPUT: a.v

mailbox M.mb int
var M.a int[16]

@ThreadEntry()
def M.f0() {
  a[0] = 123
  mb.notify(1)
}

@ThreadEntry()
def M.f1() {
  mb.wait()
  assert(a[0] == 123)
}

M.run()
M.compile()
M.writeHdl("a.v")
